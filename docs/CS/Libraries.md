---
layout: default
title: Бібліотеки (вступ)
nav_order: 11
parent: Інформатика (Java)
description: "Курс Java на уроках Інформатики."
has_toc: false
---

# Поняття бібліотеки

_Бібліотеками_ називають окрему сукупність класів, написаних кимось іншим, що виконують певні функції та можуть бути включеними у проєкт. Раніше Ви вже познайомились з пакетами. Якщо написати один або декілька (навіть сотні) пакетів для якоїсь мети та об'єднати їх у `.jar` файл (формат програм Java) (або декілька файлів), то це можна назвати бібліотекою. Вони розширюють значно можливості програмістів, однак збільшують розмір програми та можуть створювати юридичні проблеми.

Бібліотеки можна підключати до проєктів двома способами: _статично_ і _динамічно_. Якщо перетворенням коду Java у байткод займається _компілятор_, то підключенням бібліотек займається _компонувальник_, або частіше кажуть англійською _лінкер_. Статичне підключення бібліотек лінкером полягає у вбудовуванні коду бібліотеки у код проєкту, простіше кажучи — злиття. Серед плюсів є зручність перенесення такої програми (адже вона складається з одного файлу) та відсутність _залежностей_ (користувачу нічого не потрібно встановлювати додатково), а серед мінусів: відносно великий розмір програми та _ліцензування_ (трошки детальніше трохи нижче). Динамічне підключення, натомість, лише прив'язує проєкт до бібліотеки, але обидві частини залишаються окремими. Тут навпаки, переваги у тому, що можна оновлювати бібліотеки, не перероблюючи програми, сама програма компактна і більшість авторів бібліотек віддають перевагу саме такому методу. Серед недоліків залишається незручність поширення програми та помилки, у випадку відсутності бібліотек. Також, на операційних системах з пакетними менеджерами статичні бібліотеки можуть мати дублікати, так як кожна програма включає свою копію, а динамічні можуть "бути поділеними" між багатьма програмами, що значно економить місце на комп'ютері.

### Ліцензування

_Цей розділ можна пропустити, якщо Ви не плануєте створювати свої програми і ділитися ними з іншими, тому лише для власного ознайомлення._

Напевно, використовуючи комп'ютер або навіть телефон, Ви вже чули про _ліцензії_ — юридичні угоди щодо використання програмного забезпечення. Кожна бібліотека у публічному доступі має мати ліцензію, а якщо така відсутня, слід вважати (за законами майже всіх країн), що це приватна власність під захистом закону про авторські права, тому використовувати таку бібліотеку **не можна**. Ліцензії часто поділяють на такі типи:

- Суспільне надбання [наприклад CC0]: будь-які права, жодних умов
- Дозвільні (пермісивні) [MIT, Apache]: багато прав, зазвичай за умов вказування авторів
- Копілефт [GPL, AGPL]: заборона на комерцію (_пропрієтаризацію_), найчастіше вимагається ділитись кодом або навіть поширювати свою програму під такою ж ліцензією
- Пропрієтарна: такі бібліотеки платні та мають суворі умови використання

Програми, які поширюються безкоштовно та з відкритим кодом і створені з використанням таких же бібліотек, називають _вільним та відкритим програмним забезпеченням (FOSS)_. Різні бібліотеки визначають поняття _похідних творів_ по-різному, тому _важливо читати ліцензію бібліотеки перед її використанням_. Однак, наприклад, GPL є дуже неоднозначною ліцензією, але більшість програмістів вважають, що згідно з нею, навіть динамічне прив'язування вважається похідною роботою, тому проєкт, що використовує GPL бібліотеку, також має бути ліцензований під GPL. Це одна із проблем, через яку я власне рекомендую уникати цієї ліцензії, хоча не можу казати, що вона погана, або забороняти використовувати її. LGPL є дещо "полегшеною" версією GPL, яка дозволяє динамічне прив'язування без накладення себе на весь проєкт.

## Поняття модулів

Починаючи з Java (1.)9, проєкти рекомендують створювати _модульними_. Такі проєкти мають містити файл `module-info.java`, у якому вказується назва модуля програми, які інші модулі вона потребує для роботи (це включає модулі _стандартної бібліотеки_ Java, тобто навіть простий System.out), які модулі _експортує_ (відкриває похідним програмам) та які інтерфейси _забезпечує_. Виглядає для прикладу так:

```java
module java.sql {
    requires transitive java.logging;
    requires transitive java.transaction.xa;
    requires transitive java.xml;

    exports java.sql;
    exports javax.sql;

    uses java.sql.Driver;
}
```
Заглиблюватись у систему модулів я не буду, адже ми будемо вивчати лише одну бібліотеку, тому перейдімо до її підключення.

## Підключення модулярних бібліотек

На прикладі JavaFX, бібліотеки, яку Ви будете вивчати у наступній темі, підключимо її до проєкту в IDE. Спочатку необхідно завантажити SDK — .jar файли бібліотеки — JavaFX. Зробити це можна з офіційного сайту GluonHQ:

- [Windows x86_64 (64-біт)](https://download2.gluonhq.com/openjfx/18.0.1/openjfx-18.0.1_windows-x64_bin-sdk.zip)
- [Windows x86 (32-біт)](https://download2.gluonhq.com/openjfx/18.0.1/openjfx-18.0.1_windows-x86_bin-sdk.zip)
- [Linux x86_64](https://download2.gluonhq.com/openjfx/18.0.1/openjfx-18.0.1_linux-x64_bin-sdk.zip)
- [Linux arm32](https://download2.gluonhq.com/openjfx/18.0.1/openjfx-18.0.1_linux-arm32_bin-sdk.zip)
- [macOS x86_64](https://download2.gluonhq.com/openjfx/18.0.1/openjfx-18.0.1_osx-x64_bin-sdk.zip)
- [інші](https://gluonhq.com/products/javafx/)

Далі розпакуйте архів десь на диск.

### IntelliJ IDEA

1. Створіть новий JavaFX проєкт
2. Зайдіть у Файл (File) -> Структура проєкту (Project structure) -> Бібліотеки (Libraries)
3. Натисніть '+' у середньому стовпці, впишіть ім'я (JavaFX), натисніть '+' у правому стовпці, виберіть шлях до папки `lib` з розпакованого архіву

![Вікно Бібліотеки](https://openjfx.io/openjfx-docs/images/ide/intellij/ide/idea04.png)

4. Натисніть "Застосувати" (Apply), "ОК" (OK)
5. Зайдіть у Запуск (Run) -> Редагувати конфігурації (Edit configurations...)
6. До опцій віртуальної машини (VM options) додайте: `--module-path шлях/до/JavaFX/lib --add-modules javafx.controls,javafx.fxml`
7. Натисніть "Застосувати" (Apply), "ОК" (OK)

### Eclipse IDE

1. Зайдіть у Вікно (Window) -> Налаштування (Preferences) -> Java -> Шлях зборки (Build Path) -> Користувацькі бібліотеки (User Libraries)
2. Натисніть "Створити" (New), введіть назву, "Додати сторонні JARи" (Add External JARs), виберіть всі JAR з папки `lib` з розпакованого архіву

![Користувацькі бібліотеки](https://openjfx.io/openjfx-docs/images/ide/eclipse/ide/eclipse02.png)

3. Натисніть "Застосувати й закрити" (Apply and Close)
4. Створивши новий Java проєкт, зайдіть у Запуск (Run) -> Налаштування запуску (Run Configurations...) -> Програма Java (Java Application)
5. До аргументів віртуальної машини (VM arguments) додайте: `--module-path шлях/до/JavaFX/lib --add-modules javafx.controls,javafx.fxml`
6. Натисніть "Застосувати" (Apply), "Закрити" (Close)

